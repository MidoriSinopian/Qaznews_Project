{% extends 'layout.html' %}
{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞{% endblock %}

{% block content %}

<div class="breadcrumb">
    <a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
    <span>/</span>
    <a href="{{ url_for('search') }}">–ü–æ–∏—Å–∫</a>
    <span>/</span>
    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
</div>

<div class="results-header">
    <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É: <span class="query-word">{{ query }}</span></h1>
    {% if posts %}
    <p>–ù–∞–π–¥–µ–Ω–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–π: <strong>{{ posts|length }}</strong></p>
    {% endif %}
</div>

{% if posts %}
<div class="news-grid mb-section">
    {% for post in posts %}
    <a href="{{ url_for('read_news', post_id=post.id) }}" class="news-card">
        <div class="news-card-thumb">
            {% if post.image %}
            <img src="{{ post.image }}" alt="{{ post.title }}" style="width:100%;height:100%;object-fit:cover;">
            {% else %}
            üì∞
            {% endif %}
        </div>
        <div class="news-card-body">
            <span class="news-card-cat">{{ post.category_name }}</span>
            <h3 class="news-card-title">{{ post.title }}</h3>
            <p class="news-card-excerpt">{{ post.content[:130] }}...</p>
            <span class="news-card-date">{{ post.created_at[:10] if post.created_at else '‚Äî' }}</span>
            <span class="news-card-link">–ß–∏—Ç–∞—Ç—å ‚Üí</span>
        </div>
    </a>
    {% endfor %}
</div>

<div style="text-align:center; margin-top: 10px;">
    <a href="{{ url_for('search') }}" class="btn-primary">‚Üê –ù–æ–≤—ã–π –ø–æ–∏—Å–∫</a>
</div>

{% else %}

<script>
    window.onload = function() {
        alert('–ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ —Å–ª–æ–≤–æ.');
    };
</script>

<div class="empty-state">
    <div class="empty-state-icon">üòî</div>
    <h2>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h2>
    <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É <strong>"{{ query }}"</strong> –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏.<br>
    –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –ø–æ–∏—Å–∫–∞—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É.</p>
    <a href="{{ url_for('search') }}" class="btn-primary">‚Üê –ù–∞–∑–∞–¥ –∫ –ø–æ–∏—Å–∫—É</a>
</div>

{% endif %}

{% endblock %}
