{% extends 'layout.html' %}
{% block title %}{{ category.name }}{% endblock %}

{% block content %}

<div class="breadcrumb">
    <a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
    <span>/</span>
    <a href="{{ url_for('all_news') }}">–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</a>
    <span>/</span>
    {{ category.name }}
</div>

<div class="cat-page-header mb-section">
    <div class="cat-page-icon">üìÇ</div>
    <div>
        <h1>{{ category.name }}</h1>
        <p>–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´{{ category.name }}¬ª ‚Äî {{ posts|length }} –ø—É–±–ª–∏–∫–∞—Ü–∏–π</p>
    </div>
</div>

{% if posts %}
<div class="news-grid mb-section">
    {% for post in posts %}
    <a href="{{ url_for('read_news', post_id=post.id) }}" class="news-card">
        <div class="news-card-thumb">
            {% if post.image %}
            <img src="{{ post.image }}" alt="{{ post.title }}" style="width:100%;height:100%;object-fit:cover;">
            {% else %}
            üì∞
            {% endif %}
        </div>
        <div class="news-card-body">
            <span class="news-card-cat">{{ post.category_name }}</span>
            <h3 class="news-card-title">{{ post.title }}</h3>
            <p class="news-card-excerpt">{{ post.content[:130] }}...</p>
            <span class="news-card-date">{{ post.created_at[:10] if post.created_at else '‚Äî' }}</span>
            <span class="news-card-link">–ß–∏—Ç–∞—Ç—å ‚Üí</span>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <div class="empty-state-icon">üì≠</div>
    <h2>–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π</h2>
    <p>–ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´{{ category.name }}¬ª</p>
    <a href="{{ url_for('all_news') }}" class="btn-primary">–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</a>
</div>
{% endif %}

{% endblock %}
