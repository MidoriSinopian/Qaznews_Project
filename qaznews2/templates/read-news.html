{% extends 'layout.html' %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}

<div class="breadcrumb">
    <a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
    <span>/</span>
    <a href="{{ url_for('all_news') }}">–ù–æ–≤–æ—Å—Ç–∏</a>
    <span>/</span>
    <a href="{{ url_for('news_by_category', cat_id=post.category_id) }}">{{ post.category_name }}</a>
    <span>/</span>
    –ß–∏—Ç–∞—Ç—å
</div>

<div class="read-layout">

    <article>
        <div class="article-header">
            <a href="{{ url_for('news_by_category', cat_id=post.category_id) }}" class="article-cat">
                {{ post.category_name }}
            </a>
            <h1 class="article-title">{{ post.title }}</h1>
            <div class="article-meta">
                –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ post.created_at[:10] if post.created_at else '‚Äî' }}
            </div>
        </div>

        <!-- –û–ë–õ–û–ñ–ö–ê –ü–û–°–¢–ê -->
        <div class="article-cover" style="overflow:hidden; padding:0;">
            {% if post.image %}
            <img src="{{ post.image }}" alt="{{ post.title }}" style="width:100%;height:100%;object-fit:cover;">
            {% else %}
            üì∞
            {% endif %}
        </div>

        <div class="article-body">
            <p>{{ post.content }}</p>
        </div>

        {% if related_posts %}
        <div class="related-section">
            <h2 class="section-heading">üîó –ü–æ—Ö–æ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
            <div class="related-grid">
                {% for r in related_posts %}
                <a href="{{ url_for('read_news', post_id=r.id) }}" class="news-card">
                    <div class="news-card-thumb">
                        {% if r.image %}
                        <img src="{{ r.image }}" alt="{{ r.title }}" style="width:100%;height:100%;object-fit:cover;">
                        {% else %}
                        üì∞
                        {% endif %}
                    </div>
                    <div class="news-card-body">
                        <span class="news-card-cat">{{ r.category_name }}</span>
                        <h3 class="news-card-title">{{ r.title }}</h3>
                        <p class="news-card-excerpt">{{ r.content[:100] }}...</p>
                        <span class="news-card-date">{{ r.created_at[:10] if r.created_at else '‚Äî' }}</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </article>

    <aside>
        <div class="sidebar-title">üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
        <div class="sidebar-cats mb-section">
            {% for cat in categories %}
            <a href="{{ url_for('news_by_category', cat_id=cat.id) }}">
                {{ cat.name }} <span>‚Ä∫</span>
            </a>
            {% endfor %}
        </div>

        <div class="sidebar-title">üì¢ –†–µ–∫–ª–∞–º–∞</div>
        {% for cat in categories %}
        <a href="{{ url_for('news_by_category', cat_id=cat.id) }}" class="sidebar-ad" style="margin-bottom:10px;">
            <span class="ad-label">–†–µ–∫–ª–∞–º–∞</span>
            <div class="ad-title" style="font-size:13px; color:#fff;">–ù–æ–≤–æ—Å—Ç–∏: {{ cat.name }}</div>
        </a>
        {% endfor %}
    </aside>

</div>

{% endblock %}
